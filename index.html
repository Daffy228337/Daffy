<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Автоназначение заказов на курьеров</title>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=0f2d1024-aa27-4ceb-b1cc-284236a7812d&lang=ru_RU" type="text/javascript"></script>
    <style>
        #map {
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <button onclick="addCourier()">Добавить курьера</button>
    <button onclick="removeCourier()">Убрать курьера</button>
    <button onclick="createOrder()">Создать заказ</button>
    <button onclick="assignOrder()">Назначить заказ</button>
    <div id="logs"></div>

    <script>
        let couriers = [];
        let orders = [];

        function initMap() {
            ymaps.ready(init);
            function init() {
                let map = new ymaps.Map('map', {
                    center: [49.2189, 44.5182],
                    zoom: 12
                });

                let restaurant = new ymaps.Placemark([49.2189, 44.5182], {
                    hintContent: 'Ресторан',
                    balloonContent: 'Ресторан по адресу Рабоче-Крестьянская ул., 9 Б, Волгоград'
                });

                map.geoObjects.add(restaurant);

                drawSectors(map);
            }

            function drawSectors(map) {
                let sectors = [
                    { sector: 'Сектор А', coordinates: [[49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182]] },
                    { sector: 'Сектор Б', coordinates: [[49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182]] },
                    { sector: 'Сектор В', coordinates: [[49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182]] },
                    { sector: 'Сектор Г', coordinates: [[49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182], [49.2189, 44.5182]] }
                ];

                sectors.forEach(sector => {
                    let polygon = new ymaps.Polygon({
                        geometry: {
                            type: 'Polygon',
                            coordinates: sector.coordinates
                        },
                        properties: {
                            hintContent: sector.sector,
                            balloonContent: sector.sector
                        }
                    });

                    map.geoObjects.add(polygon);
                });
            }
        }

        function addCourier() {
            couriers.push({ id: couriers.length + 1, location: [49.2189, 44.5182], orders: [] });
            updateLogs();
        }

        function removeCourier() {
            if (couriers.length > 0) {
                couriers.pop();
                updateLogs();
            }
        }

        function createOrder() {
            orders.push({ id: orders.length + 1, pickup: [49.2189, 44.5182], delivery: [49.2189, 44.5182], time: new Date().toLocaleTimeString() });
            updateLogs();
        }

        function assignOrder() {
            // Здесь должен быть реализован алгоритм автоназначения заказов на курьеров
        }

        function updateLogs() {
            let logs = document.getElementById('logs');
            logs.innerHTML = '';

            couriers.forEach(courier => {
                let courierLog = document.createElement('div');
                courierLog.textContent = `Курьер ${courier.id}: ${courier.orders.map(order => `${order.id}`).join(', ')}`;
                logs.appendChild(courierLog);
            });

            orders.forEach(order => {
                let orderLog = document.createElement('div');
                orderLog.textContent = `${order.id} Заказ ${order.pickup} -> ${order.delivery} ${order.time}`;
                logs.appendChild(orderLog);
            });
        }
    </script>
</body>
</html>