<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Демонстрация Распределения Заказов Волгоград</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=0f2d1024-aa27-4ceb-b1cc-284236a7812d
"text/javascript"></script>
    <style>
        #map {
            height: 500px;
            width: 100%;
        }
    </style>
</head>
<body onload="initMap()">
    <div id="map"></div>
    <button onclick="addCourier()">Прибавить курьера</button>
    <button onclick="removeCourier()">Убрать курьера</button>
    <button onclick="createRandomOrder()">Создать заказ</button>
    <button onclick="assignOrders()">Назначить заказы</button>
    <div id="orderLog">Лог заказов:</div>
    <script>
        let couriers = [];
        let orders = [];
        let restaurantCoords = [48.707103, 44.516939];
        let map;

        function initMap() {
            map = new ymaps.Map("map", {
                center: restaurantCoords,
                zoom: 12
            });

            drawSectors();
            addRestaurantMarker();
        }

        function drawSectors() {
            // Создание секторов, цвета и координаты будут изменяться в соответствии с реальным расположением
            // Пример одной из границ секторов, нужно создать 4
            var sectorLine = new ymaps.Polyline([
                [restaurantCoords, [restaurantCoords[0] + 0.1, restaurantCoords[1]]], // Пример
                [restaurantCoords, [restaurantCoords[0], restaurantCoords[1] + 0.1]] // Пример
            ], {}, {
                strokeColor: 'red',
                strokeWidth: 2
            });
            map.geoObjects.add(sectorLine);
            // Повторите для остальных секторов с соответствующими координатами и цветами
        }

        function addRestaurantMarker() {
            var restaurantPlacemark = new ymaps.Placemark(restaurantCoords, {
                balloonContent: 'Ресторан'
            });
            map.geoObjects.add(restaurantPlacemark);
        }

        function addCourier() {
            couriers.push({ id: couriers.length + 1, orders: [] });
            console.log(`Курьер номер ${couriers.length} добавлен.`);
        }

        function removeCourier() {
            if (couriers.length > 0) {
                couriers.pop();
                console.log('Курьер удален.');
            }
        }

        function createRandomOrder() {
            let randomSector = Math.floor(Math.random() * 4) + 1;
            let orderTime = new Date().toLocaleTimeString("ru-RU", { timeZone: "Europe/Moscow" });
            orders.push({ sector: randomSector, time: orderTime, marker: null });
            logOrder(orders.length, randomSector, orderTime);
            placeOrderOnMap(randomSector);
        }

        function placeOrderOnMap(sector) {
            if (!orders[orders.length - 1].marker) {
                var orderPlacemark = new ymaps.Placemark([/* здесь должны быть координаты в секторе */]);
                map.geoObjects.add(orderPlacemark);
                orders[orders.length - 1].marker = orderPlacemark; // Сохраняем маркер заказа
            }
        }

        function assignOrders() {
            // Реализация алгоритма распределения заказов
            // Добавьте логику здесь
        }

        function logOrder(orderNumber, sector, time) {
            let log = document.getElementById('orderLog');
            log.innerHTML += `Заказ номер ${orderNumber} в секторе ${sector}, создано: ${time}<br>`;
        }
    </script>
</body>
</html>