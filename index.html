<!DOCTYPE html>
<html>
<head>
    <title>Симуляция доставки</title>
    <meta charset="utf-8" />
    <script src="https://api-maps.yandex.ru/2.1/?apikey=0f2d1024-aa27-4ceb-b1cc-284236a7812d&lang=ru_RU" type="text/javascript"></script>
    <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        #controls {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: white;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="controls">
        <button onclick="addCourier()">Добавить курьера</button>
        <button onclick="removeCourier()">Убрать курьера</button>
        <br><br>
        <button onclick="createOrder()">Создать заказ</button>
        <button onclick="assignOrder()">Назначить заказ</button>
        <br><br>
        <div>Список курьеров:</div>
        <ul id="courierList"></ul>
        <br>
        <div>Лог заказов:</div>
        <ul id="orderList"></ul>
        <br>
        <div>Лог назначений:</div>
        <ul id="assignmentLog"></ul>
    </div>
    <script>
        ymaps.ready(init);

        let myMap;
        let restaurantCoords = [48.708406, 44.514243]; // Координаты ресторана
        let couriers = [];
        let orders = [];
        let nextOrderId = 1;
        let nextCourierId = 1;

        function init() {
            myMap = new ymaps.Map("map", {
                center: restaurantCoords,
                zoom: 15
            });
            
            // Добавляем метку ресторана
            let restaurantMarker = new ymaps.Placemark(restaurantCoords, {
                balloonContent: "Ресторан"
            });
            myMap.geoObjects.add(restaurantMarker);

            // Рисуем сектора
            drawSectors();
        }

        function drawSectors() {
            // Логика для рисования секторов на карте
            // ...
        }

        function addCourier() {
            couriers.push({
                id: nextCourierId++,
                orders: []
            });
            updateCourierList();
        }

        function removeCourier() {
            if (couriers.length > 0) {
                couriers.pop();
                updateCourierList();
            }
        }

        function createOrder() {
            // Генерируем случайные координаты внутри области доставки
            let orderCoords = generateRandomCoords();
            let sector = getSector(orderCoords);
            let order = {
                id: nextOrderId++,
                coords: orderCoords,
                sector: sector,
                time: new Date().toLocaleString('ru-RU', { timeZone: 'Europe/Moscow' }) // Московское время
            };
            orders.push(order);

            // Добавляем метку заказа на карту
            let orderMarker = new ymaps.Placemark(orderCoords, {
                balloonContent: `Заказ ${order.id}`
            }, {
                preset: 'islands#redCircleIcon'
            });
            myMap.geoObjects.add(orderMarker);

            updateOrderList();
        }

        function assignOrder() {
            // Реализация логики назначения заказа
            // ...
            updateAssignmentLog();
        }

        // Вспомогательные функции
        function generateRandomCoords() {
            // Логика для генерации случайных координат
            // ...
        }

        function getSector(coords) {
            // Логика определения сектора по координатам
            // ...
        }

        function updateCourierList() {
            // Обновление списка курьеров в HTML
            // ...
        }

        function updateOrderList() {
            // Обновление списка заказов в HTML
            // ...
        }

        function updateAssignmentLog() {
            // Обновление лога назначений в HTML
            // ...
        }
    </script>
</body>
</html>