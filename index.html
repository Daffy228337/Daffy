<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Демонстрационная версия распределения заказов между курьерами</title>
  <!-- Подключаем Яндекс Maps API -->
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=0f2d1024-aa27-4ceb-b1cc-284236a7812d
" type="text/javascript"></script>
  <style>
    html, body, #map {
      width: 100%;
      height: 100%;
      padding: 0;
      margin: 0;
    }
    #controls {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    }
    #logs {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background-color: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      max-height: 200px;
      overflow-y: auto;
    }
    .sector-label {
      position: absolute;
      background-color: white;
      padding: 5px;
      border-radius: 3px;
      border: 1px solid #ccc;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="controls">
    <button id="addCourier">Добавить курьера</button>
    <button id="removeCourier">Убрать курьера</button>
    <button id="createOrder">Создать заказ</button>
    <button id="assignOrder">Назначить заказ</button>
  </div>
  <div id="logs">
    <div id="orderLog">Лог заказов:</div>
    <div id="assignmentLog">Лог назначений:</div>
  </div>

  <script>
    ymaps.ready(init);

    var couriers = [];
    var orders = [];
    var sectors = [
      { name: 'A', color: '#FF0000' },
      { name: 'B', color: '#00FF00' },
      { name: 'C', color: '#0000FF' },
      { name: 'D', color: '#FFFF00' }
    ];

    function init() {
      var myMap = new ymaps.Map("map", {
        center: [48.714325, 44.518758], // Координаты Волгограда
        zoom: 12
      });

      // Добавляем ресторан на карту
      var restaurant = new ymaps.Placemark([48.714325, 44.518758], {
        hintContent: 'Ресторан',
        balloonContent: 'Рабоче-Крестьянская ул., 9 Б, Волгоград'
      }, {
        preset: 'islands#redIcon'
      });
      myMap.geoObjects.add(restaurant);

      // Размечаем сектора
      var sectorCoords = [
        // Сектор А
        [[48.72, 44.50], [48.72, 44.53], [48.70, 44.53], [48.70, 44.50]],
        // Сектор Б
        [[48.70, 44.50], [48.70, 44.53], [48.68, 44.53], [48.68, 44.50]],
        // Сектор В
        [[48.70, 44.53], [48.70, 44.56], [48.68, 44.56], [48.68, 44.53]],
        // Сектор Г
        [[48.72, 44.53], [48.72, 44.56], [48.70, 44.56], [48.70, 44.53]]
      ];
      sectorCoords.forEach(function(coords, index) {
        var polygon = new ymaps.Polygon(coords, {}, {
          fillColor: sectors[index].color,
          fillOpacity: 0.5
        });
        myMap.geoObjects.add(polygon);

        // Добавляем метку с названием сектора
        var sectorLabel = new ymaps.Placemark(getCentroid(coords), {
          hintContent: 'Сектор ' + sectors[index].name
        }, {
          iconLayout: 'default#image',
          iconImageHref: 'sector-label.png',
          iconImageSize: [100, 30],
          iconImageOffset: [-50, -15]
        });
        myMap.geoObjects.add(sectorLabel);
      });

      // Логика кнопок
      document.getElementById('addCourier').onclick = function() {
        couriers.push({ id: couriers.length + 1, orders: [] });
        updateCourierLog();
      };

      document.getElementById('removeCourier').onclick = function() {
        if (couriers.length > 0) {
          couriers.pop();
          updateCourierLog();
        }
      };

      document.getElementById('createOrder').onclick = function() {
        var order = createRandomOrder();
        orders.push(order);
        addOrderToMap(order);
        updateOrderLog();
      };

      document.getElementById('assignOrder').onclick = function() {
        if (orders.length > 0 && couriers.length > 0) {
          assignOrderToCourier();
          updateAssignmentLog();
        }
      };
    }

    function createRandomOrder() {
      var sectorIndex = Math.floor(Math.random() * sectors.length);
      return {
        id: orders.length + 1,
        sector: sectorIndex,
        time: getCurrentTime()
      };
    }

    function assignOrderToCourier() {
      var order = orders.shift();
      var assignedCourier = findBestCourierForOrder(order);
      assignedCourier.orders.push(order);
      var assignmentLogEntry = 'Заказ ' + order.id + ' (' + sectors[order.sector].name + ') ' + order.time + ' назначен Курьеру ' + assignedCourier.id;
      document.getElementById('assignmentLog').innerHTML += '<br>' + assignmentLogEntry;
      updateOrderLog();
    }

    function findBestCourierForOrder(order) {
      // ... Реализация алгоритма назначения заказа курьеру на основе технического задания ...
      return couriers[Math.floor(Math.random() * couriers.length)];
    }

    // ... Функции для работы с логами и временем ...

    function updateCourierLog() {
      var courierLog = 'Курьеры:<br>';
      couriers.forEach(function(courier) {
        courierLog += 'Курьер ' + courier.id + ' (Заказов: ' + courier.orders.length + ')