import yandex_api

couriers = {}  # dictionary to store courier information
orders = []  # list to store orders

def calculate_load(courier_id):
    # calculate courier's load (number of orders in the next hour, excluding orders in the "Delivered" status)
    load = 0
    for order in orders:
        if order['courier_id'] == courier_id and order['status'] != 'Delivered':
            load += 1
    return load

def calculate_priority(courier_id, order_sector):
    # calculate courier's priority based on their load and direction (sector) of their assigned orders
    priority = 0
    if courier_id in couriers:
        priority = couriers[courier_id]['load'] / (couriers[courier_id]['load'] + 1)
        if order_sector in couriers[courier_id]['sectors']:
            priority += 1
    return priority

def assign_order(order):
    # assign the order to the courier with the highest priority
    max_priority = 0
    assigned_courier = None
    for courier_id in couriers:
        priority = calculate_priority(courier_id, order['sector'])
        if priority > max_priority:
            max_priority = priority
            assigned_courier = courier_id
    if assigned_courier:
        orders.append({'id': order['id'], 'courier_id': assigned_courier, 'status': 'New'})
        couriers[assigned_courier]['load'] += 1
        couriers[assigned_courier]['sectors'].add(order['sector'])

def update_order_status(order_id, new_status):
    # update the courier's load and priority when an order's status changes
    for order in orders:
        if order['id'] == order_id:
            if new_status == 'Delivered':
                couriers[order['courier_id']]['load'] -= 1
            elif new_status == 'In Transit':
                couriers[order['courier_id']]['load'] += 1
            break

# example usage
order = {'id': 1, 'address': 'Москва, ул. Ленина, 1', 'sector': 'А'}
assign_order(order)

order = {'id': 2, 'address': 'Москва, ул. Ленина, 2', 'sector': 'Б'}
assign_order(order)

update_order_status(1, 'In Transit')